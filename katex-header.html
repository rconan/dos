<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css" integrity="sha384-t5CR+zwDAROtph0PXGte6ia8heboACF9R5l/DiY+WZ3P2lxNgvJkQk5n7GPvLMYw" crossorigin="anonymous">

<!-- The loading of KaTeX is deferred to speed up page rendering -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js" integrity="sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8+w2LAIftJEULZABrF9PPFv+tVkH" crossorigin="anonymous"></script>

<!-- To automatically render math in text elements, include the auto-render extension: -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js" integrity="sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB+w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
<script>
 "use strict";
 document.addEventListener("DOMContentLoaded", function () {
     var maths = document.getElementsByClassName("language-math");
     for (var i=0; i<maths.length; i++) {
         var el = maths[i];
         katex.render(el.innerText, el, {displayMode: true});
     }

     var codes = document.getElementsByTagName("code");
     for (i=0; i<codes.length; i++) {
         el = codes[i];
         if (el.classList.contains("language-math")) continue;
         if (el.classList.contains("language-inline-math")) {
             katex.render(el.innerText, el);
             continue;
         }

         var parent = el.parentNode;
         if (parent.nodeName.toLowerCase() === "pre") continue;
         // TODO: Can this be done with DOM manipulation rather than string manipulation?
         // https://stackoverflow.com/q/48438067/3019990
         var inlineMath = "$" + el.outerHTML + "$";
         if (parent.innerHTML.indexOf(inlineMath) !== -1) {
             el.classList.add("language-inline-math");
             parent.innerHTML = parent.innerHTML.replace("$" + el.outerHTML + "$", el.outerHTML);
             i--;
         }
     }
 });
</script>
